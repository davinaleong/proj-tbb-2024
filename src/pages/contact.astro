---
import MainLayoutAstro from "../layouts/main.layout.astro"
import { type CmbLibMessageTypes } from "../lib/cms.lib"
import { fetchMessageTypes } from "../lib/cms.lib"
import { frontmatter } from "../content/pages/contact.md"
const { title, description, keywords } = frontmatter

const messageTypes: CmbLibMessageTypes[] = []

try {
    const json = await fetchMessageTypes()
    messageTypes.push(...json.messageTypes.data)
} catch (error) {
    console.error(`Fetch message type error`, error)
}
---
<MainLayoutAstro title={title} description={description} keywords={keywords}>
    <div class="flow">
      <!-- Hero Section -->
      <section class="section section-contact section-contact-hero">
        <article class="wrapper section__wrapper mx-auto p-4">
          <div class="section-contact-hero__body | text-center flow">
            <h1 class="text-6xl font-serif">{title}</h1>
          </div>
          <!-- ./section-contact-hero__body -->
        </article>
      </section>
  
      <!-- Contact Form Section -->
      <section class="section section-contact section-contact-form">
        <div
          class="wrapper section__wrapper section-contact-form__wrapper container-q container-q-contact-form | mx-auto p-4"
        >
          <form method="post" class="form | flow" data-element="contact-form">
            <div class="form__group">
              <label for="first_name" class="form__label">Name</label>
              <input
                type="text"
                name="first_name"
                id="first_name"
                class="form__field"
                placeholder="Your Name"
                required
              />
            </div>
            <!-- ./form__group -->

            <div class="form__group form__group-hidden">
              <label for="last_name" class="form__label">Last Name</label>
              <input
                type="text"
                name="last_name"
                id="last_name"
                class="form__field"
              />
            </div>
            <!-- ./form__group -->

            <div class="form__group">
              <label for="email" class="form__label">Email</label>
              <input
                type="email"
                name="email"
                id="email"
                class="form__field"
                placeholder="Your Email"
                required
              />
            </div>
            <!-- ./form__group -->

            <div class="form__group">
              <label for="subject" class="form__label">Subject</label>
              <select name="subject" id="subject" class="form__field">
                <option value="">-- Select --</option>
                {messageTypes.map(({ id, title }: CmbLibMessageTypes) => (
                    <option value={id}>{title}</option>
                ))}
              </select>
            </div>
            <!-- ./form__group -->

            <div class="form__group">
              <label for="message" class="form__label">Message</label>
              <textarea
                name="message"
                id="message"
                class="form__field"
                placeholder="Your Message"
                rows="4"
                required
              ></textarea>
            </div>
            <!-- ./form__group -->

            <div class="form__buttons">
              <button type="submit" class="btn btn-tbb btn-tbbBlue">
                Send
              </button>
              <button type="reset" class="btn btn-tbb btn-tbbTan">
                Reset
              </button>
            </div>
            <!-- ./form__buttons -->
          </form>
        </div>
      </section>
    </div><!-- ./flow -->
  </MainLayoutAstro>